Items = {

    -- special items


    ["weapon_precisionrifle"] = {
        label = "Precision Rifle",
        weight = 1,
        type = "weapon",
        useItemInfo = false,
        rarity = "rare",
        price = 500000,
        sell_price = 270000,
        pourcent = 1,
        hide = false,
    },
    
    ["oppressor2"] = {
        label = "Oppressor Mk II",
        weight = 1,
        type = "vehicle",
        useItemInfo = false,
        rarity = "rare",
        price = 300000,
        sell_price = 150000,
        show = true,
        pourcent = 3,
        hide = false,
    },

    ["ped_access"] = {
        label = "Ped Access",
        weight = 1,
        type = "item",
        useItemInfo = false,
        rarity = "rare",
        price = 5000000,
        price_coins = 500,
        sell_price = 1,
        pourcent = 90,
        hide = true,
    },

    ["ped_access1week"] = {
        label = "Ped Access 1 Week",
        weight = 1,
        type = "item",
        useItemInfo = false,
        rarity = "rare",
        price = 500000,
        price_coins = 500,
        sell_price = 1,
        pourcent = 90,
        hide = false,
    },

    ["tracker_deluxo"] = {
        label = "Tracker Deluxo",
        weight = 1,
        type = "item",
        useItemInfo = false,
        rarity = "rare",
        price = 20000,
        price_coins = 500,
        sell_price = 15000,
        pourcent = 90,
        hide = false,
    },

    ["ped_access1month"] = {
        label = "Ped Access 1 Month",
        weight = 1,
        type = "item",
        useItemInfo = false,
        rarity = "rare",
        price = 2100000,
        price_coins = 500,
        sell_price = 1,
        pourcent = 90,
        hide = true,
    },

    ["kill_effect1week"] = {
        label = "Kill Effect 1 Week",
        weight = 1,
        type = "item",
        useItemInfo = false,
        rarity = "rare",
        price = 450000,
        price_coins = 500,
        sell_price = 1,
        pourcent = 90,
        hide = false,
    },

    ["kill_effect1month"] = {
        label = "Kill Effect 1 Month",
        weight = 1,
        type = "item",
        useItemInfo = false,
        rarity = "rare",
        price = 3000000,
        price_coins = 500,
        sell_price = 1,
        pourcent = 90,
        hide = true,
    },

    -- basic items

    ["weapon_tacticalrifle"] = {
        label = "Tactical Rifle",
        weight = 2,
        type = "weapon",
        useItemInfo = false,
        rarity = false,
        price = 300,
        sell_price = 300,
        pourcent = 86,
    },

    ["weapon_specialcarbine"] = {
        label = "Special Carbine",
        weight = 4,
        type = "weapon",
        useItemInfo = false,
        rarity = "epic", -- if you make it false there will be no rarity effect at the slot of item
        price = 200,
        sell_price = 200,
        pourcent = 95,
    },
    ["weapon_assaultrifle"] = {
        label = "Assault Rifle",
        weight = 4,
        type = "weapon",
        useItemInfo = false,
        rarity = "rare",-- if you make it false there will be no rarity effect at the slot of item
        price = 200,
        sell_price = 200,
        pourcent = 96,
    },
    ["deluxo"] = {
        label = "Deluxo",
        type = "vehicle",
        weight = 1,
        useItemInfo = false,
        rarity = "legend", -- if you make it false there will be no rarity effect at the slot of item
        price = 62500,
        sell_price = 62500,
        pourcent = 1,
    },
    ["oppressor"] = {
        label = "Oppressor",
        type = "vehicle",
        weight = 1,
        useItemInfo = false,
        rarity = "legend", -- if you make it false there will be no rarity effect at the slot of item
        price = 42500,
        sell_price = 42500,
        pourcent = 2,
    },
    ["buzzard2"] = {
        label = "Buzzard",
        type = "vehicle",
        weight = 2,
        useItemInfo = false,
        rarity = "legend", -- if you make it false there will be no rarity effect at the slot of item
        price = 1000,
        sell_price = 1000,
        pourcent = 5,
    },
    ["weapon_musket"] = {
        label = "Musket",
        type = "weapon",
        weight = 10.0,
        useItemInfo = false,
        rarity = false,
        price = 3000,
        sell_price = 2300,
        pourcent = 3,
    },
    ["weapon_bullpuprifle_mk2"] = {
        label = "Fusil Bullbup Mk II",
        type = "weapon",
        weight = 2.0,
        useItemInfo = false,
        rarity = false,
        price = 300,
        sell_price = 300,
        pourcent = 89,
    },
    ["weapon_assaultrifle_mk2"] = {
        label = "Assault Rifle MK II",
        type = "weapon",
        weight = 2.0,
        useItemInfo = false,
        rarity = false,
        price = 300,
        sell_price = 300,
        pourcent = 10
    },
    ["weapon_mg"] = {
        label = "MG",
        type = "weapon",
        weight = 2.0,
        useItemInfo = false,
        rarity = false,
        price = 200,
        sell_price = 200,
        pourcent = 10,
    },
    ["weapon_combatmg"] = {
        label = "M60",
        type = "weapon",
        weight = 3.0,
        useItemInfo = false,
        rarity = false,
        price = 390,
        sell_price = 390,
        pourcent = 30,
    },
    ["weapon_combatmg_mk2"] = {
        label = "M60 Mk II",
        type = "weapon",
        weight = 3.0,
        useItemInfo = false,
        rarity = "epic",
        price = 600,
        sell_price = 600,
        pourcent = 15,
    },
    ["weapon_marksmanrifle"] = {
        label = "Marksman Rifle",
        type = "weapon",
        weight = 10.0,
        useItemInfo = false,
        rarity = "legend",
        price = 45000,
        sell_price = 32000,
        pourcent = 1,
    },
    ["weapon_marksmanrifle_mk2"] = {
        label = "Markman Rifle Mk II",
        type = "weapon",
        weight = 10.0,
        useItemInfo = false,
        rarity = "legend",
        price = 60000,
        sell_price = 40000,
        pourcent = 1,
    },
    ["weapon_heavysniper"] = {
        label = "AWP",
        type = "weapon",
        weight = 10.0,
        useItemInfo = false,
        rarity = "legend",
        price = 125000,
        sell_price = 90000,
        pourcent = 1,
    },
    ["weapon_heavysniper_mk2"] = {
        label = "AWP MK II",
        type = "weapon",
        weight = 10.0,
        useItemInfo = false,
        rarity = "legend",
        price =  150000,
        sell_price = 100000,
        pourcent = 1,
    },
    ["weapon_hominglauncher"] = {
        label = "Homing Launcher",
        type = "weapon",
        weight = 10.0,
        useItemInfo = false,
        rarity = "epic",
        price = 100000,
        sell_price = 50000,
        pourcent = 1,
    },
    ["weapon_rpg"] = {
        label = "RPG",
        type = "weapon",
        weight = 10.0,
        useItemInfo = false,
        rarity = "rare",
        price = 75000,
        sell_price = 50000,
        pourcent = 1,
    },
    ["weapon_sniperrifle"] = {
        label = "Sniper Rifle",
        type = "weapon",
        weight = 10.0,
        useItemInfo = false,
        rarity = "epic",
        price = 36500,
        sell_price = 26500,
        pourcent = 1,
    },
    ["weapon_specialcarbine_mk2"] = {
        label = "Special Carbine MK II",
        type = "weapon",
        weight = 3.0,
        useItemInfo = false,
        rarity = "rare",
        price = 300,
        sell_price = 300,
        pourcent = 85,
    },
    ["scarab"] = {
        label = "Scarab",
        type = "vehicle",
        weight = 2.0,
        useItemInfo = false,
        rarity = "legend",
        price = 55500,
        sell_price = 35500,
        pourcent = 1,
    },
    ["nightshark"] = {
        label = "Nightshark",
        type = "vehicle",
        weight = 2.0,
        useItemInfo = false,
        rarity = "epic",
        price = 55500,
        sell_price = 35500,
        pourcent = 1,
    },
    ["dominator4"] = {
        label = "Dominator",
        type = "vehicle",
        weight = 2.0,
        useItemInfo = false,
        rarity = "rare",
        price = 150,
        sell_price = 150,
        pourcent = 20,
    },
    ["bmx"] = {
        label = "BMX",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 500,
        sell_price = 500,
        pourcent = 95,
    },
    ["kuruma"] = {
        label = "Kuruma",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 200,
        sell_price = 200,
        pourcent = 95,
    },
    ["policet"] = {
        label = "Police Transporter",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 2500,
        sell_price = 2500,
        pourcent = 70,
    },
    ["brioso"] = {
        label = "Brioso",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 100,
        sell_price = 70,
        pourcent = 97,
    },
    ["yosemite3"] = {
        label = "Yosemite",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 125,
        sell_price = 125,
        pourcent = 97,
    },
    ["revolter"] = {
        label = "Revolter",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 150,
        sell_price = 150,
        pourcent = 15,
    },
    ["jugular"] = {
        label = "Jugular",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 150,
        sell_price = 150,
        pourcent = 20,
    },
    ["deathbike"] = {
        label = "Deathbike",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 100,
        sell_price = 100,
        pourcent = 20,
    },
    ["dukes2"] = {
        label = "Duke o death",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 9000,
        sell_price = 7000,
        pourcent = 14,
    },
    ["brickade"] = {
        label = "Brickade",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 4000,
        sell_price = 2500,
        pourcent = 12,
    },
    ["thruster"] = {
        label = "Thruster",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 5000,
        sell_price = 5000,
        pourcent = 8,
    },
    ["vigilante"] = {
        label = "Vigilante",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 3000,
        sell_price = 3000,
        pourcent = 8,
    },
    ["weapon_carbinerifle_mk2"] = {
        label = "Carbine Rifle MK II",
        type = "weapon",
        weight = 3.0,
        useItemInfo = false,
        rarity = false,
        price = 300,
        sell_price = 300,
        pourcent = 9,
    },
    ["ztype"] = {
        label = "Z-Type",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 100,
        sell_price = 100,
        pourcent = 97,
    },
    ["weapon_assaultsmg"] = {
        label = "SMG",
        type = "weapon",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 200,
        sell_price = 200,
        pourcent = 15,
    },
    ["weapon_carbinerifle"] = {
        label = "Carbine Rifle",
        type = "weapon",
        weight = 2.0,
        useItemInfo = false,
        rarity = false,
        price = 200,
        sell_price = 200,
        pourcent = 5,
    },
    ["weapon_compactlauncher"] = {
        label = "Compact Launcher",
        type = "weapon",
        weight = 10.0,
        useItemInfo = false,
        rarity = false,
        price = 35000,
        sell_price = 25000,
        pourcent = 4,
    },
    ["weapon_heavyshotgun"] = {
        label = "Heavy Shotgun",
        type = "weapon",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 150,
        sell_price = 150,
        pourcent = 97,
    },
    ["weapon_combatpdw"] = {
        label = "Combat PDW",
        type = "weapon",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 200,
        sell_price = 200,
        pourcent = 97,
    },
    ["weapon_molotov"] = {
        label = "Molotov",
        type = "weapon",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 10,
        sell_price = 5,
        pourcent = 97,
        hide = true,
    },
    ["buffalo4"] = {
        label = "Buffalo Sport",
        type = "vehicle",
        weight = 1.0,
        useItemInfo = false,
        rarity = false,
        price = 250,
        sell_price = 150,
        pourcent = 97,
        -- hide = true,

    },
    ["kevlar"] = {
        label = "Kevlar",
        type = "heal",
        weight = 2.0,
        useItemInfo = false,
        rarity = "rare",
        price = 20,
        sell_price = 10,
        pourcent = 97,
    },
    ["bandage"] = {
        label = "Bandage",
        type = "heal",
        weight = 1.0,
        useItemInfo = false,
        rarity = "rare",
        price = 5,
        sell_price = 2,
        pourcent = 97,
    },
}

ItemCount = 0

for k,v in pairs(Items) do
    v.image = "assets/items/"..k..".png"
    ItemCount = ItemCount + 1
end

function FoundItemInConfig(itemName)
    if Items[tostring(itemName)] then 
        return true
    end
    return false
end

function ItemListInventory()
    return Items
end
exports("ItemListInventory", ItemListInventory)

function UseWeapon(itemName, info)
    local ped = PlayerPedId()
    local weapon = GetSelectedPedWeapon(ped)
    local weaponHash = GetHashKey(itemName)
    local bigWeapon = GetCooldownProgress("heavy_weapon")

    -- Si le joueur est déjà équipé de cette arme, on la retire
    if weapon == weaponHash then
        RemoveAllPedWeapons(ped)
        return
    end

    -- Vérification des armes lourdes et leur cooldown
    if (itemName == "weapon_hominglauncher") or (itemName == "weapon_rpg") or (itemName == "weapon_compactlauncher") then
        if bigWeapon > 0 then
            ShowAboveRadarMessage("~r~Please wait "..bigWeapon.." seconds")
            return
        end
        AddCooldown("heavy_weapon", 4)
    end

    -- Équipement de l'arme (dans ou hors véhicule)
    ShowAboveRadarMessage("Equipping your ~g~"..Items[itemName].label)
    GiveWeaponToPed(ped, weaponHash, (Items[itemName].useItemInfo and info) and info.ammo or 999, false, true)
    SetWeaponAttachments(ped, weaponHash, info and info.attachments)
    local savedComponents = GetWeaponActiveComponent(itemName)
    if savedComponents and #savedComponents > 0 then
        for _, componentHash in ipairs(savedComponents) do
            GiveWeaponComponentToPed(ped, weaponHash, componentHash)
        end
    end

    -- Force l'équipement de l'arme
    -- SetCurrentPedWeapon(ped, weaponHash, true)
end

function SetWeaponAttachments(ped, weaponHash, info)
    if info then
        for k, v in pairs(info) do
            if v then
                GiveWeaponComponentToPed(ped, weaponHash, v)
            end
        end
    end
end